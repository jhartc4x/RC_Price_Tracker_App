{% extends "base.html" %}
{% block title %}Add-ons Explorer | Royal Caribbean Price Companion{% endblock %}
{% block content %}
<section class="page-head">
    <span class="eyebrow">Add-on Intelligence</span>
    <h1>Compare purchased vs live add-on pricing</h1>
    <p>Select a sailing, review purchased items, and spot savings without noise.</p>
</section>

<section class="section-block">
    <div class="section-head">
        <div>
            <h2>Select Sailing</h2>
            <p>Choose ship + sail date to fetch available and purchased add-ons.</p>
        </div>
    </div>

    <div class="addons-filter-bar" id="addons-filter-bar">
        <div class="filter-group">
            <label for="filter-ship">Ship</label>
            <select id="filter-ship" aria-label="Select Ship">
                <option value="">Loading ships...</option>
            </select>
        </div>
        <div class="filter-group">
            <label for="filter-date">Sail Date</label>
            <select id="filter-date" aria-label="Select Sail Date" disabled>
                <option value="">Select a Ship First</option>
            </select>
        </div>
        <button id="filter-go" class="btn btn-primary" disabled>
            <span id="filter-go-text">Load Add-ons</span>
        </button>
    </div>
</section>

<section class="section-block" id="addons-results">
    <div class="addon-top-grid">
        <div class="addons-summary-strip" id="addons-summary"></div>
        <article class="drink-tool-card">
            <div class="card-head">
                <h3>Drink Package Advisor</h3>
                <span class="badge positive">Recommended</span>
            </div>
            <p class="card-body-text">Based on your track record we recommend upgrading to the Premium package for ${"%.0f"|format(249)} over 7 days.</p>
            <ul class="drink-list">
                <li><strong>Included drinks:</strong> Cocktails, wine, mocktails, +1 premium sparkling</li>
                <li><strong>Breakeven:</strong> 4 drinks/day per guest</li>
                <li><strong>Next deadline:</strong> 2026-04-02 Â· 14 days</li>
            </ul>
            <div class="card-actions">
                <button class="btn btn-primary">Reserve package</button>
                <button class="btn btn-ghost">Run ROI</button>
            </div>
        </article>
    </div>

    <div class="addons-tabs">
        <button class="tab-btn active" data-tab="purchased">My Purchases</button>
        <button class="tab-btn" data-tab="available">Available</button>
    </div>

    <div class="tab-panel active" id="panel-purchased">
        <div class="table-wrap">
            <table>
                <thead>
                    <tr>
                        <th>Add-on</th>
                        <th>Guest</th>
                        <th>Paid</th>
                        <th>Current</th>
                        <th>Savings</th>
                    </tr>
                </thead>
                <tbody id="purchased-body">
                    <tr>
                        <td colspan="5" style="text-align:center; color: var(--muted);">Select a sailing to view add-ons.</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="tab-panel" id="panel-available">
        <div class="table-wrap">
            <table>
                <thead>
                    <tr>
                        <th>Add-on</th>
                        <th>Category</th>
                        <th>Regular</th>
                        <th>Current Price</th>
                    </tr>
                </thead>
                <tbody id="available-body">
                    <tr>
                        <td colspan="4" style="text-align:center; color: var(--muted);">Select a sailing to view add-ons.</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</section>

<footer class="page-footer">
    <p>RC Price Companion</p>
</footer>
{% endblock %}
